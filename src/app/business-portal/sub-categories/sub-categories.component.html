<div class="full-grey-screen">
  <div class="sub-categories">
    <ngx-ui-loader [overlayColor]="'#fff'" [fgsColor]="'#823cf1'" [fgsType]="'chasing-dots'" [pbColor]="'#823cf1'">
    </ngx-ui-loader>
    <kz-header-search [category]="category" [resultLocation]="currentLocation"></kz-header-search>
    <div [ngSwitch]="category?.level + 1">
      <div class="body" *ngSwitchCase="1">

        <div class="sub-categories" *ngIf="category?.subCategories?.length">
          <kz-categories [categories]="category?.subCategories" [currentCategory]="category"></kz-categories>
        </div>
        <button class="filters" (click)="goToFilter()">
          <img src="../../../assets/images/icons/filter-icon.svg" alt="">
          Filters
        </button>
        <div class="businesses">
          <div class="businesses__title-block">
            <p class="title">{{category?.code}} in {{params.city || profile?.city}}</p>
            <a class="see-all" [routerLink]="['/business-portal/search-result']"
              [queryParams]="{category: category?.id}">
              See All
            </a>
          </div>
          <ng-container *ngIf="firstBusinessesPart?.length">
            <kz-business-card [direction]="'horizontal'" [isLongTitle]="true" [business]="business"
              *ngFor="let business of firstBusinessesPart"
              [routerLink]="['/', 'business-portal', 'business', business?.id]"></kz-business-card>
          </ng-container>
          <kz-add-new-business-block></kz-add-new-business-block>
          <ng-container *ngIf="secondBusinessesPart?.length">
            <kz-business-card [direction]="'horizontal'" [isLongTitle]="true" [business]="business"
              *ngFor="let business of secondBusinessesPart"
              [routerLink]="['/', 'business-portal', 'business', business?.id]"></kz-business-card>
          </ng-container>
          <button class="businesses__see-more" *ngIf="showMore" (click)="getMoreBusinesses()"><span>View More</span>
            <p-progressSpinner *ngIf="loadingBusinesses"></p-progressSpinner>
          </button>
        </div>
        <div class="show-map" (click)="goToMapSearch()">
          <svg width="14" height="21" viewBox="0 0 14 21" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M6.67437 13.0853C9.91812 13.0853 12.5477 10.4001 12.5477 7.08782C12.5477 3.7755 9.91812 1.09033 6.67437 1.09033C3.43061 1.09033 0.801025 3.7755 0.801025 7.08782C0.801025 10.4001 3.43061 13.0853 6.67437 13.0853Z"
              fill="white" />
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M13.4791 7.60544L13.4791 7.60536C13.5023 7.37337 13.514 7.1381 13.514 6.89984C13.514 3.08925 10.4887 0 6.75701 0C3.0253 0 0 3.08925 0 6.89984C0 7.1899 0.017887 7.4756 0.0517922 7.75611C0.0939593 8.25996 0.280457 9.43563 1.08179 11.2734C1.45528 12.1299 2.23166 13.2218 3.12262 14.4749C4.37444 16.2354 5.85247 18.3141 6.75701 20.5051C7.56604 18.2817 9.14401 16.1251 10.4672 14.3167C11.3435 13.1191 12.108 12.0742 12.4636 11.2637C13.5308 8.83054 13.4796 7.61715 13.4791 7.60544ZM2.09705 7.91259C2.03992 7.61163 2.00948 7.30085 2.00948 6.98298C2.00948 4.30538 4.13617 2.13483 6.75808 2.13483C9.37999 2.13483 11.5056 4.30538 11.5056 6.98271C11.5056 7.33465 11.4685 7.67787 11.3986 8.00883C11.2976 8.48644 11.1281 8.93762 10.9007 9.35145L10.8996 9.35335C10.7704 9.58835 10.6225 9.81134 10.458 10.0199C10.4568 10.0215 10.4557 10.023 10.4546 10.0244C10.4539 10.0252 10.4533 10.0259 10.4527 10.0267C10.4124 10.078 10.371 10.1281 10.3285 10.1775C10.3283 10.1779 10.3279 10.1782 10.3276 10.1786C10.3273 10.1789 10.3269 10.1792 10.3267 10.1796C10.241 10.2794 10.1513 10.3754 10.0581 10.4675C10.057 10.4688 10.0558 10.47 10.0547 10.4711C10.0541 10.4716 10.0535 10.4722 10.053 10.4727C10.0079 10.5171 9.96199 10.5605 9.91527 10.603L9.90352 10.6136C9.85653 10.6562 9.80901 10.6976 9.76069 10.738L9.75509 10.7426C9.65684 10.8244 9.55513 10.9021 9.45047 10.9759C9.44567 10.9795 9.44086 10.983 9.43606 10.9863C9.38613 11.0212 9.33541 11.055 9.28415 11.088C9.28085 11.0902 9.27746 11.0923 9.27409 11.0944C9.27119 11.0963 9.2683 11.0981 9.26546 11.1C9.21367 11.133 9.16108 11.1651 9.10795 11.1962L9.09834 11.2017C9.04414 11.233 8.98942 11.2633 8.93415 11.2925L8.92801 11.2957C8.87382 11.3243 8.81882 11.3516 8.76329 11.3781L8.76325 11.3781C8.75552 11.3819 8.74779 11.3857 8.74007 11.3892C8.68641 11.4146 8.63194 11.4391 8.57695 11.4623C8.57281 11.4641 8.56861 11.4658 8.56441 11.4675C8.56021 11.4692 8.55599 11.4709 8.55185 11.4726C8.49552 11.4961 8.43892 11.5187 8.38153 11.54L8.37058 11.5438C8.31398 11.5648 8.25658 11.5844 8.19892 11.6032L8.18183 11.609C8.12443 11.6275 8.0665 11.6447 8.0083 11.6608C7.99816 11.6637 7.98828 11.6665 7.97813 11.6692C7.92073 11.6847 7.8628 11.6992 7.8046 11.7125C7.79949 11.7137 7.79429 11.7149 7.78906 11.716C7.78473 11.7169 7.78039 11.7178 7.77604 11.7188C7.7157 11.7322 7.6551 11.7447 7.59396 11.7559C7.59129 11.7564 7.58836 11.7567 7.58569 11.7573C7.52562 11.7679 7.46502 11.7774 7.40415 11.7859C7.40028 11.7864 7.39642 11.787 7.39252 11.7875C7.38808 11.7882 7.3836 11.7888 7.37905 11.7894C7.31898 11.7976 7.25838 11.8041 7.19778 11.8099C7.1863 11.8107 7.17482 11.8118 7.16334 11.8129C7.10274 11.818 7.04187 11.8221 6.98073 11.8251C6.97086 11.8257 6.96124 11.826 6.95137 11.8262C6.88703 11.829 6.82242 11.8306 6.75755 11.8306C6.69107 11.8306 6.6254 11.8287 6.55972 11.826C6.55519 11.8257 6.55065 11.8255 6.54612 11.8254C6.54158 11.8253 6.53703 11.8251 6.53249 11.8249C6.47002 11.8219 6.40808 11.8175 6.34641 11.8121C6.3352 11.8112 6.32372 11.8101 6.31251 11.8091C6.2511 11.8031 6.19024 11.7962 6.12963 11.7881L6.1008 11.784C6.0378 11.7752 5.97532 11.7654 5.91312 11.754C5.91084 11.7538 5.90875 11.7533 5.90653 11.7529L5.90538 11.7526C5.84371 11.7412 5.7823 11.7284 5.72144 11.7145L5.69981 11.7095C5.64001 11.6956 5.58101 11.6804 5.52201 11.6643L5.49211 11.6561C5.43391 11.6398 5.37624 11.6223 5.31911 11.6038C5.3103 11.601 5.30122 11.5981 5.29241 11.5951C5.23341 11.5757 5.17495 11.5553 5.11701 11.5334C5.11381 11.5324 5.11034 11.531 5.10714 11.5296C5.04867 11.5075 4.99074 11.4844 4.93334 11.4598C4.92907 11.4582 4.9248 11.4566 4.92053 11.4547C4.86339 11.4304 4.80733 11.4045 4.75153 11.3781L4.72831 11.3669C4.67358 11.3404 4.61938 11.3129 4.56599 11.2845L4.54436 11.2728C4.48964 11.2431 4.43544 11.2128 4.38205 11.1812C4.3797 11.1799 4.37752 11.1784 4.37523 11.1771C4.37467 11.1767 4.37409 11.1764 4.3735 11.176C4.31744 11.1428 4.26191 11.1084 4.20745 11.073L4.20665 11.0725C4.15299 11.0376 4.10039 11.0016 4.04833 10.9645C4.04593 10.9627 4.04347 10.961 4.041 10.9593C4.03853 10.9576 4.03606 10.9559 4.03365 10.9541C3.98319 10.9179 3.93327 10.8805 3.88415 10.8424C3.88161 10.8405 3.87915 10.8385 3.87668 10.8365C3.87421 10.8345 3.87174 10.8326 3.8692 10.8306C3.81927 10.7914 3.77015 10.7516 3.72183 10.7104L3.71676 10.7061C3.61638 10.6205 3.51947 10.5308 3.42629 10.437L3.42069 10.4315C3.37504 10.3855 3.33072 10.3386 3.28694 10.2909C3.28498 10.2889 3.28315 10.2869 3.28136 10.2849C3.28045 10.2839 3.27956 10.2829 3.27866 10.2819C3.23461 10.2336 3.19163 10.1843 3.14945 10.1341L3.14811 10.1325C3.01836 9.97764 2.89823 9.81434 2.78824 9.64369C2.78743 9.64205 2.78637 9.64069 2.7853 9.63905C2.63846 9.41033 2.50979 9.16825 2.40193 8.91499C2.40193 8.9148 2.40179 8.91474 2.40172 8.91463C2.40168 8.91458 2.40166 8.91453 2.40166 8.91445C2.26631 8.59685 2.16326 8.26127 2.09705 7.91259Z"
              fill="#4B03BD" />
          </svg>
        </div>
      </div>
      <div class="body" *ngSwitchCase="2">
        <div class="sub-categories list">
          <div class="sub-category parent-category"
            (click)="goToSearchResult(category)">
            All {{category.code}}
          </div>
          <div class="sub-category label-category">
            Or something more specific...
          </div>
          <ng-container *ngIf="category.subCategories?.length">
            <div class="sub-category" *ngFor="let category of category.subCategories"
              (click)="goToSearchResult(category)">
              {{category.code}}
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
